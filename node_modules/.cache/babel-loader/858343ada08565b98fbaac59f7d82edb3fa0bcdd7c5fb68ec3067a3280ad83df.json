{"ast":null,"code":"// src/services/razorpayService.js\nexport const razorpayService = {\n  // Load Razorpay script\n  async loadRazorpayScript() {\n    return new Promise(resolve => {\n      const script = document.createElement('script');\n      script.src = 'https://checkout.razorpay.com/v1/checkout.js';\n      script.onload = () => {\n        console.log('‚úÖ Razorpay script loaded successfully');\n        resolve(true);\n      };\n      script.onerror = () => {\n        console.error('‚ùå Failed to load Razorpay script');\n        resolve(false);\n      };\n      document.body.appendChild(script);\n    });\n  },\n  // Create demo payment order (frontend only)\n  async createDemoPaymentOrder(orderData) {\n    try {\n      console.log('üí≥ Creating demo payment order (frontend mode):', orderData);\n\n      // In demo mode, we simulate the order creation\n      // In production, this would be done by your backend\n      const demoOrderId = `order_demo_${Date.now()}`;\n      console.log('‚úÖ Demo payment order created:', demoOrderId);\n      return {\n        success: true,\n        orderId: demoOrderId,\n        amount: Math.round(orderData.amount * 100),\n        // Convert to paise\n        currency: 'INR'\n      };\n    } catch (error) {\n      console.error('‚ùå Failed to create demo payment order:', error);\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  },\n  // Process payment with demo mode\n  async processPayment(paymentData, onSuccess, onError) {\n    try {\n      console.log('üîÑ Loading Razorpay...');\n      const isLoaded = await this.loadRazorpayScript();\n      if (!isLoaded) {\n        throw new Error('Razorpay SDK failed to load. Please check your internet connection.');\n      }\n      console.log('üöÄ Opening Razorpay checkout in demo mode...');\n      console.log('üí° Demo Mode: Using frontend-only integration');\n      const options = {\n        key: process.env.REACT_APP_RAZORPAY_KEY_ID,\n        amount: paymentData.amount,\n        // Amount in paise\n        currency: paymentData.currency || 'INR',\n        name: 'CarPore',\n        description: 'Premium Air Fresheners - Demo Mode',\n        image: '/logo192.png',\n        // Note: In demo mode, we don't use order_id\n        // order_id: paymentData.orderId, // Comment this out for demo\n        handler: function (response) {\n          console.log('‚úÖ Payment successful (Demo Mode):', response);\n          onSuccess({\n            paymentId: response.razorpay_payment_id,\n            orderId: paymentData.orderId,\n            // Use our demo order ID\n            signature: 'demo_signature_' + Date.now() // Demo signature\n          });\n        },\n        prefill: {\n          name: paymentData.customerName || '',\n          email: paymentData.customerEmail || '',\n          contact: paymentData.customerPhone || ''\n        },\n        notes: {\n          address: paymentData.address || 'CarPore Customer',\n          mode: 'demo'\n        },\n        theme: {\n          color: '#FBBF24' // CarPore yellow color\n        },\n        modal: {\n          ondismiss: function () {\n            console.log('‚ö†Ô∏è Payment cancelled by user');\n            onError(new Error('Payment cancelled by user'));\n          }\n        }\n      };\n      const rzp = new window.Razorpay(options);\n      rzp.open();\n    } catch (error) {\n      console.error('‚ùå Payment processing error:', error);\n      onError(error);\n    }\n  },\n  // Verify payment (demo mode)\n  async verifyPayment(paymentData) {\n    try {\n      console.log('üîç Verifying payment (Demo Mode):', paymentData);\n\n      // In demo mode, we always return success\n      // In production, this would verify the payment signature on your backend\n      console.log('‚úÖ Payment verification successful (Demo Mode)');\n      return {\n        verified: true,\n        mode: 'demo',\n        message: 'Payment verified in demo mode'\n      };\n    } catch (error) {\n      console.error('‚ùå Error verifying payment:', error);\n      return {\n        verified: false,\n        error: error.message\n      };\n    }\n  }\n};","map":{"version":3,"names":["razorpayService","loadRazorpayScript","Promise","resolve","script","document","createElement","src","onload","console","log","onerror","error","body","appendChild","createDemoPaymentOrder","orderData","demoOrderId","Date","now","success","orderId","amount","Math","round","currency","message","processPayment","paymentData","onSuccess","onError","isLoaded","Error","options","key","process","env","REACT_APP_RAZORPAY_KEY_ID","name","description","image","handler","response","paymentId","razorpay_payment_id","signature","prefill","customerName","email","customerEmail","contact","customerPhone","notes","address","mode","theme","color","modal","ondismiss","rzp","window","Razorpay","open","verifyPayment","verified"],"sources":["C:/Users/Neoz/OneDrive/Documents/Claude Firebase/carpore-store/src/services/razorpayService.js"],"sourcesContent":["// src/services/razorpayService.js\r\nexport const razorpayService = {\r\n  // Load Razorpay script\r\n  async loadRazorpayScript() {\r\n    return new Promise((resolve) => {\r\n      const script = document.createElement('script');\r\n      script.src = 'https://checkout.razorpay.com/v1/checkout.js';\r\n      script.onload = () => {\r\n        console.log('‚úÖ Razorpay script loaded successfully');\r\n        resolve(true);\r\n      };\r\n      script.onerror = () => {\r\n        console.error('‚ùå Failed to load Razorpay script');\r\n        resolve(false);\r\n      };\r\n      document.body.appendChild(script);\r\n    });\r\n  },\r\n\r\n  // Create demo payment order (frontend only)\r\n  async createDemoPaymentOrder(orderData) {\r\n    try {\r\n      console.log('üí≥ Creating demo payment order (frontend mode):', orderData);\r\n      \r\n      // In demo mode, we simulate the order creation\r\n      // In production, this would be done by your backend\r\n      const demoOrderId = `order_demo_${Date.now()}`;\r\n      \r\n      console.log('‚úÖ Demo payment order created:', demoOrderId);\r\n      return {\r\n        success: true,\r\n        orderId: demoOrderId,\r\n        amount: Math.round(orderData.amount * 100), // Convert to paise\r\n        currency: 'INR'\r\n      };\r\n    } catch (error) {\r\n      console.error('‚ùå Failed to create demo payment order:', error);\r\n      return { success: false, error: error.message };\r\n    }\r\n  },\r\n\r\n  // Process payment with demo mode\r\n  async processPayment(paymentData, onSuccess, onError) {\r\n    try {\r\n      console.log('üîÑ Loading Razorpay...');\r\n      \r\n      const isLoaded = await this.loadRazorpayScript();\r\n      if (!isLoaded) {\r\n        throw new Error('Razorpay SDK failed to load. Please check your internet connection.');\r\n      }\r\n\r\n      console.log('üöÄ Opening Razorpay checkout in demo mode...');\r\n      console.log('üí° Demo Mode: Using frontend-only integration');\r\n\r\n      const options = {\r\n        key: process.env.REACT_APP_RAZORPAY_KEY_ID,\r\n        amount: paymentData.amount, // Amount in paise\r\n        currency: paymentData.currency || 'INR',\r\n        name: 'CarPore',\r\n        description: 'Premium Air Fresheners - Demo Mode',\r\n        image: '/logo192.png',\r\n        // Note: In demo mode, we don't use order_id\r\n        // order_id: paymentData.orderId, // Comment this out for demo\r\n        handler: function (response) {\r\n          console.log('‚úÖ Payment successful (Demo Mode):', response);\r\n          onSuccess({\r\n            paymentId: response.razorpay_payment_id,\r\n            orderId: paymentData.orderId, // Use our demo order ID\r\n            signature: 'demo_signature_' + Date.now() // Demo signature\r\n          });\r\n        },\r\n        prefill: {\r\n          name: paymentData.customerName || '',\r\n          email: paymentData.customerEmail || '',\r\n          contact: paymentData.customerPhone || ''\r\n        },\r\n        notes: {\r\n          address: paymentData.address || 'CarPore Customer',\r\n          mode: 'demo'\r\n        },\r\n        theme: {\r\n          color: '#FBBF24' // CarPore yellow color\r\n        },\r\n        modal: {\r\n          ondismiss: function() {\r\n            console.log('‚ö†Ô∏è Payment cancelled by user');\r\n            onError(new Error('Payment cancelled by user'));\r\n          }\r\n        }\r\n      };\r\n\r\n      const rzp = new window.Razorpay(options);\r\n      rzp.open();\r\n    } catch (error) {\r\n      console.error('‚ùå Payment processing error:', error);\r\n      onError(error);\r\n    }\r\n  },\r\n\r\n  // Verify payment (demo mode)\r\n  async verifyPayment(paymentData) {\r\n    try {\r\n      console.log('üîç Verifying payment (Demo Mode):', paymentData);\r\n      \r\n      // In demo mode, we always return success\r\n      // In production, this would verify the payment signature on your backend\r\n      console.log('‚úÖ Payment verification successful (Demo Mode)');\r\n      return { \r\n        verified: true, \r\n        mode: 'demo',\r\n        message: 'Payment verified in demo mode'\r\n      };\r\n    } catch (error) {\r\n      console.error('‚ùå Error verifying payment:', error);\r\n      return { verified: false, error: error.message };\r\n    }\r\n  }\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}